# -*- coding: utf-8 -*-
# vim: ft=jinja

{#- Start with  defaults from defaults.yaml #}
{% import_yaml "firewalld/defaults.yaml" as default_settings %}
{% import_yaml "firewalld/osfamilymap.yaml" as osfamilymap %}

{% set platform_defaults = salt['grains.filter_by'](default_settings,
    default='default',
    merge=salt['grains.filter_by'](osfamilymap, grain='os_family',
      merge=salt['pillar.get']('firewalld:lookup')
    )
) %}

{#- Merge in salt:lookup pillar #}
{% set firewalld = salt['pillar.get'](
    'firewalld',
    default=platform_defaults.firewalld,
    merge=True)
%}
